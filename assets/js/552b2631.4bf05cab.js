"use strict";(self.webpackChunkapito_website_v_2=self.webpackChunkapito_website_v_2||[]).push([[2296,1423],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,ah:()=>s,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),h=r,m=u["".concat(p,".").concat(h)]||u[h]||d[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},94817:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var a=n(87462),r=(n(67294),n(3905)),o=n(67714);const i={sidebar_label:"React",title:"GraphQL API Integration with React based Project"},l=void 0,p={unversionedId:"api-integration/graphql/integration-with-react",id:"api-integration/graphql/integration-with-react",title:"GraphQL API Integration with React based Project",description:"In order for us to fetch data from a GraphQL API in React, we need to install Apollo Client. Apollo Client gives us a way to connect to our GraphQL data source",source:"@site/docs/api-integration/graphql/integration-with-react.mdx",sourceDirName:"api-integration/graphql",slug:"/api-integration/graphql/integration-with-react",permalink:"/docs/api-integration/graphql/integration-with-react",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-integration/graphql/integration-with-react.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"React",title:"GraphQL API Integration with React based Project"},sidebar:"docs",previous:{title:"Golang",permalink:"/docs/api-integration/graphql/integration-with-golang"},next:{title:"PHP",permalink:"/docs/api-integration/graphql/integration-with-php"}},s={},c=[{value:"Installation",id:"installation",level:2},{value:"Create a client",id:"create-a-client",level:2},{value:"Connect your client to React",id:"connect-your-client-to-react",level:2},{value:"Request data",id:"request-data",level:2},{value:"Detailed Guide",id:"detailed-guide",level:2}],d={toc:c};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("head",null,(0,r.kt)("meta",{property:"og:type",content:"article"})),(0,r.kt)("p",null,"In order for us to fetch data from a GraphQL API in React, we need to install Apollo Client. Apollo Client gives us a way to connect to our GraphQL data source\nand lets us execute GraphQL operations. Apollo Client also manages state and allows us cache our data on the client-side."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"First, let's install the packages we need:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @apollo/client graphql\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@apollo/client"),": This single package contains virtually everything you need to set up Apollo Client. It includes the in-memory cache, local state management, error handling, and a React-based view layer."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"graphql"),": This package provides logic for parsing GraphQL queries.")),(0,r.kt)("h2",{id:"create-a-client"},"Create a client"),(0,r.kt)("p",null,"Now that we have all the dependencies we need, let's initialize an ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloClient")," instance. You'll need to provide it the URL of a running GraphQL server, such as ",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/practical-snyder-48p1r2roz4"},"this CodeSandbox instance"),"."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js"),", let's import ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloClient")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"@apollo/client")," and provide our GraphQL server's URL as the ",(0,r.kt)("inlineCode",{parentName:"p"},"uri")," property of the constructor's configuration object:"),(0,r.kt)(o.default,{mdxType:"ApiSecretNote"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.js"',title:'"index.js"'},"import { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst client = new ApolloClient({\n    uri: 'https://api.apito.io/secured/graphql',\n    cache: new InMemoryCache(),\n    headers: {\n        Authorization: `Bearer API_SECRET`,\n      },\n});\n")),(0,r.kt)("p",null,"That's it! Our ",(0,r.kt)("inlineCode",{parentName:"p"},"client")," is ready to start fetching data. Now, before we start using Apollo Client with React, let's first try sending a query with plain JavaScript."),(0,r.kt)("p",null,"In the same ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," file, call ",(0,r.kt)("inlineCode",{parentName:"p"},"client.query()")," with the query string shown below. You'll need to import the ",(0,r.kt)("inlineCode",{parentName:"p"},"gql")," function to parse the query string into a query document."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.js"',title:'"index.js"'},"import { gql } from '@apollo/client';\n\n// const client = ...\n\nclient\n  .query({\n    query: gql`\n      query GetRates {\n        rates(currency: \"USD\") {\n          currency\n        }\n      }\n    `\n  })\n  .then(result => console.log(result));\n")),(0,r.kt)("p",null,"Run this code, open your console, and inspect the result object. You should see a ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property with ",(0,r.kt)("inlineCode",{parentName:"p"},"rates")," attached, along with some other properties like ",(0,r.kt)("inlineCode",{parentName:"p"},"loading")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"networkStatus"),"."),(0,r.kt)("p",null,"Although executing GraphQL operations like this can be useful, Apollo Client really shines when it's integrated with a view layer like React. You can bind queries to your UI and update it automatically as new data is fetched."),(0,r.kt)("p",null,"Let's look at how that works!"),(0,r.kt)("h2",{id:"connect-your-client-to-react"},"Connect your client to React"),(0,r.kt)("p",null,"You connect Apollo Client to React with the ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloProvider")," component. The ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloProvider")," is similar to React's ",(0,r.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html#contextprovider"},(0,r.kt)("inlineCode",{parentName:"a"},"Context.Provider")),". It wraps your React app and places the client on the context, which enables you to access it from anywhere in your component tree."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js"),", let's wrap our React app with an ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloProvider"),". We suggest putting the ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloProvider")," somewhere high in your app, above any component that might need to access GraphQL data. For example, it could be outside of your root route component if you're using React Router."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { render } from 'react-dom';\n\nimport { ApolloProvider } from '@apollo/client';\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <div>\n        <h2>My first Apollo app \ud83d\ude80</h2>\n      </div>\n    </ApolloProvider>\n  );\n}\n\nrender(<App />, document.getElementById('root'));\n")),(0,r.kt)("h2",{id:"request-data"},"Request data"),(0,r.kt)("p",null,"Once your ",(0,r.kt)("inlineCode",{parentName:"p"},"ApolloProvider")," is hooked up, you're ready to start requesting data with ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery")," is a React hook that use the ",(0,r.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-intro.html"},"Hooks API")," to share GraphQL data with your UI."),(0,r.kt)("p",null,"First, pass your GraphQL query (wrapped in the ",(0,r.kt)("inlineCode",{parentName:"p"},"gql")," function) to the ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery")," hook. When your component renders and the ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery")," hook runs, a result object is returned that contains ",(0,r.kt)("inlineCode",{parentName:"p"},"loading"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"error"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Apollo Client tracks error and loading state for you, which are reflected in the ",(0,r.kt)("inlineCode",{parentName:"li"},"loading")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"error")," properties."),(0,r.kt)("li",{parentName:"ul"},"When the result of your query comes back, it's attached to the ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," property.")),(0,r.kt)("p",null,"Let's create an ",(0,r.kt)("inlineCode",{parentName:"p"},"ExchangeRates")," component in ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," to see the ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery")," hook in action:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useQuery, gql } from '@apollo/client';\n\nconst EXCHANGE_RATES = gql`\n  query GetExchangeRates {\n    rates(currency: \"USD\") {\n      currency\n      rate\n    }\n  }\n`;\n\nfunction ExchangeRates() {\n  const { loading, error, data } = useQuery(EXCHANGE_RATES);\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>Error :(</p>;\n\n  return data.rates.map(({ currency, rate }) => (\n    <div key={currency}>\n      <p>\n        {currency}: {rate}\n      </p>\n    </div>\n  ));\n}\n")),(0,r.kt)("p",null,"Congrats, you just made your first ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery"),"-based component! \ud83c\udf89 If you render your ",(0,r.kt)("inlineCode",{parentName:"p"},"ExchangeRates")," component within your ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," component from the previous example, you'll first see a loading indicator on the page, followed by data when it's ready. Apollo Client automatically caches this data when it comes back from the server, so you won't see a loading indicator if you run the same query again."),(0,r.kt)("p",null,"To play around with the app we just built, ",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/get-started-coinbase-client-73r10"},"check it out on CodeSandbox"),". But don't stop there! Try building more components that use ",(0,r.kt)("inlineCode",{parentName:"p"},"useQuery"),", and experiment with the concepts you just learned."),(0,r.kt)("h2",{id:"detailed-guide"},"Detailed Guide"),(0,r.kt)("p",null,"For an in depth and detailed guide, be sure to check out the official apollo guide ",(0,r.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/react/get-started/"},"here")))}u.isMDXComponent=!0},67714:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={},i=void 0,l={unversionedId:"api-integration/graphql/shared/api-secret-note",id:"api-integration/graphql/shared/api-secret-note",title:"api-secret-note",description:"Always remember to replace API_SECRET with the correct value that you copied from apito console.",source:"@site/docs/api-integration/graphql/shared/api-secret-note.mdx",sourceDirName:"api-integration/graphql/shared",slug:"/api-integration/graphql/shared/api-secret-note",permalink:"/docs/api-integration/graphql/shared/api-secret-note",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-integration/graphql/shared/api-secret-note.mdx",tags:[],version:"current",frontMatter:{}},p={},s=[],c={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Always remember to replace ",(0,r.kt)("inlineCode",{parentName:"p"},"API_SECRET")," with the correct value that you copied from apito console.\nGo to ",(0,r.kt)("a",{parentName:"p",href:"/docs/console/api-integration-with-your-application"},"this page")," if you do not know where to find your api secrets for your project")))}d.isMDXComponent=!0}}]);