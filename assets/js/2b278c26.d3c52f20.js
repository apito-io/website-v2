"use strict";(self.webpackChunkapito_website_v_2=self.webpackChunkapito_website_v_2||[]).push([[335,1423],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,ah:()=>s,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),h=a,g=d["".concat(p,".").concat(h)]||d[h]||c[h]||i;return n?r.createElement(g,o(o({ref:t},u),{},{components:n})):r.createElement(g,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},42128:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>p,toc:()=>u});var r=n(87462),a=(n(67294),n(3905)),i=n(67714);const o={sidebar_label:"Flutter",title:"GraphQL API Integration with Flutter Project"},l=void 0,p={unversionedId:"api-integration/graphql/integration-with-flutter",id:"api-integration/graphql/integration-with-flutter",title:"GraphQL API Integration with Flutter Project",description:"Both GraphQL and Flutter introduced a new style of software development when they were first released.",source:"@site/docs/api-integration/graphql/integration-with-flutter.mdx",sourceDirName:"api-integration/graphql",slug:"/api-integration/graphql/integration-with-flutter",permalink:"/docs/api-integration/graphql/integration-with-flutter",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-integration/graphql/integration-with-flutter.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Flutter",title:"GraphQL API Integration with Flutter Project"},sidebar:"docs",previous:{title:"iOS",permalink:"/docs/api-integration/graphql/integration-with-ios"},next:{title:"Golang",permalink:"/docs/api-integration/graphql/integration-with-golang"}},s={},u=[{value:"Installation",id:"installation",level:2},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Usage",id:"usage",level:2},{value:"GraphQL Provider",id:"graphql-provider",level:2},{value:"Query",id:"query",level:2},{value:"Mutations",id:"mutations",level:2}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("head",null,(0,a.kt)("meta",{property:"og:type",content:"article"})),(0,a.kt)("p",null,"Both GraphQL and Flutter introduced a new style of software development when they were first released.\nGraphQL enabled developers to fetch data in their desired shape and format. Flutter made it possible to build a mobile app in one language and cross-compile it for other platforms."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("p",null,"First, depend on this package:"),(0,a.kt)("p",null,"dependencies:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"graphql_flutter: ^4.0.0-beta\n")),(0,a.kt)("p",null,"And then import it inside your dart code:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"import 'package:graphql_flutter/graphql_flutter.dart';\n")),(0,a.kt)("h2",{id:"migration-guide"},"Migration Guide"),(0,a.kt)("p",null,"Find the migration from version 3 to version 4 here."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("p",null,"To connect to a GraphQL Server, we first need to create a GraphQLClient. A GraphQLClient requires both a cache and a link to be initialized."),(0,a.kt)("p",null,"In our example below, we will be using the Github Public API. we are going to use HttpLink which we will concatenate with AuthLink so as to\nattach our github access token. For the cache, we are going to use GraphQLCache."),(0,a.kt)(i.default,{mdxType:"ApiSecretNote"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:graphql_flutter/graphql_flutter.dart';\n\nvoid main() async {\n\n  // We're using HiveStore for persistence,\n  // so we need to initialize Hive.\n  await initHiveForFlutter();\n\n  final HttpLink httpLink = HttpLink(\n    'https://api.apito.io/secured/graphql',\n  );\n\n  final AuthLink authLink = AuthLink(\n    getToken: () async => 'Bearer API_SECRET',\n    // OR\n    // getToken: () => 'Bearer <YOUR_PERSONAL_ACCESS_TOKEN>',\n  );\n\n  final Link link = authLink.concat(httpLink);\n\n  ValueNotifier<GraphQLClient> client = ValueNotifier(\n    GraphQLClient(\n      link: link,\n      // The default store is the InMemoryStore, which does NOT persist to disk\n      store: GraphQLCache(store: HiveStore()),\n    ),\n  );\n}\n\n")),(0,a.kt)("h2",{id:"graphql-provider"},"GraphQL Provider"),(0,a.kt)("p",null,"In order to use the client, your ",(0,a.kt)("inlineCode",{parentName:"p"},"Query")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Mutation")," widgets must be wrapped with the ",(0,a.kt)("inlineCode",{parentName:"p"},"GraphQLProvider")," widget."),(0,a.kt)("p",null,"We recommend wrapping your MaterialApp with the GraphQLProvider widget."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"}," ...\n\n  return GraphQLProvider(\n    client: client,\n    child: MaterialApp(\n      title: 'Flutter Demo',\n      ...\n    ),\n  );\n\n  ...\n")),(0,a.kt)("h2",{id:"query"},"Query"),(0,a.kt)("p",null,"Creating a query is as simple as creating a multiline string:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},'String readRepositories = """\n  query ReadRepositories(\\$nRepositories: Int!) {\n    viewer {\n      repositories(last: \\$nRepositories) {\n        nodes {\n          id\n          name\n          viewerHasStarred\n        }\n      }\n    }\n  }\n""";\n')),(0,a.kt)("p",null,"In your widget:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},"// ...\nQuery(\n  options: QueryOptions(\n    document: gql(readRepositories), // this is the query string you just created\n    variables: {\n      'nRepositories': 50,\n    },\n    pollInterval: Duration(seconds: 10),\n  ),\n  // Just like in apollo refetch() could be used to manually trigger a refetch\n  // while fetchMore() can be used for pagination purpose\n  builder: (QueryResult result, { VoidCallback refetch, FetchMore fetchMore }) {\n    if (result.hasException) {\n        return Text(result.exception.toString());\n    }\n\n    if (result.isLoading) {\n      return Text('Loading');\n    }\n\n    // it can be either Map or List\n    List repositories = result.data['viewer']['repositories']['nodes'];\n\n    return ListView.builder(\n      itemCount: repositories.length,\n      itemBuilder: (context, index) {\n        final repository = repositories[index];\n\n        return Text(repository['name']);\n    });\n  },\n);\n// ...\n")),(0,a.kt)("h2",{id:"mutations"},"Mutations"),(0,a.kt)("p",null,"Again first create a mutation string:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},'String addStar = """\n  mutation AddStar(\\$starrableId: ID!) {\n    addStar(input: {starrableId: \\$starrableId}) {\n      starrable {\n        viewerHasStarred\n      }\n    }\n  }\n""";\n')),(0,a.kt)("p",null,"The syntax for mutations is fairly similar to that of a query. The only difference is that the first argument of the builder function is a mutation function. Just call it to trigger the mutations (Yeah we deliberately stole this from react-apollo.)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},"...\n\nMutation(\n  options: MutationOptions(\n    document: gql(addStar), // this is the mutation string you just created\n    // you can update the cache based on results\n    update: (GraphQLDataProxy cache, QueryResult result) {\n      return cache;\n    },\n    // or do something with the result.data on completion\n    onCompleted: (dynamic resultData) {\n      print(resultData);\n    },\n  ),\n  builder: (\n    RunMutation runMutation,\n    QueryResult result,\n  ) {\n    return FloatingActionButton(\n      onPressed: () => runMutation({\n        'starrableId': <A_STARTABLE_REPOSITORY_ID>,\n      }),\n      tooltip: 'Star',\n      child: Icon(Icons.star),\n    );\n  },\n);\n\n...\n")),(0,a.kt)("p",null,"For more detailed guide be sure to check out the official guide of the ",(0,a.kt)("inlineCode",{parentName:"p"},"graphql_flutter")," page  ",(0,a.kt)("a",{parentName:"p",href:"https://pub.dev/packages/graphql_flutter"},"here")))}d.isMDXComponent=!0},67714:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const i={},o=void 0,l={unversionedId:"api-integration/graphql/shared/api-secret-note",id:"api-integration/graphql/shared/api-secret-note",title:"api-secret-note",description:"Always remember to replace API_SECRET with the correct value that you copied from apito console.",source:"@site/docs/api-integration/graphql/shared/api-secret-note.mdx",sourceDirName:"api-integration/graphql/shared",slug:"/api-integration/graphql/shared/api-secret-note",permalink:"/docs/api-integration/graphql/shared/api-secret-note",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-integration/graphql/shared/api-secret-note.mdx",tags:[],version:"current",frontMatter:{}},p={},s=[],u={toc:s};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Always remember to replace ",(0,a.kt)("inlineCode",{parentName:"p"},"API_SECRET")," with the correct value that you copied from apito console.\nGo to ",(0,a.kt)("a",{parentName:"p",href:"/docs/console/api-integration-with-your-application"},"this page")," if you do not know where to find your api secrets for your project")))}c.isMDXComponent=!0}}]);